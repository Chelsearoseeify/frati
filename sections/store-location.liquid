{{ 'component-store.css' | asset_url | stylesheet_tag }}

{%- style -%}
  .section-{{ section.id }}-padding {
    padding-top: {{ section.settings.padding_top | times: 0.75 | round: 0 }}px;
    padding-bottom: {{ section.settings.padding_bottom | times: 0.75 | round: 0 }}px;
  }

  iframe {
    width: 100vw;
  }

  p {
    font-size: 1.6rem;
    line-height: 2.4rem;
    margin: 0;
  }

  @media only screen and (min-width: 750px) and (max-width: 1727px) {
    p {
      font-size: 1.6rem;
      line-height: 2.4rem;
    }

    iframe {
      width: 33vw;
      height: 30vw;
    }
  }

  @media only screen and (min-width: 1728px) and (max-width: 1919px) {
    p {
      font-size: 1.9rem;
      line-height: 2.8rem;
    }

    iframe {
      width: 32vw;
      height: 30vw;
    }
  }

  @media only screen and (min-width: 1920px) {
    p {
      font-size: 2.1rem;
      line-height: 3.2rem;
    }

    iframe {
      width: 32vw;
      height: 30vw;
    }
  }

  .day-time-schedule {
    display: flex;
    gap: 2rem;
  }

  @media screen and (min-width: 750px) {
    .section-{{ section.id }}-padding {
      padding-top: {{ section.settings.padding_top }}px;
      padding-bottom: {{ section.settings.padding_bottom }}px;
    }
  }
{%- endstyle -%}

<div class="section-{{ section.id }}-padding gradient color-{{ section.settings.color_scheme }}">
  <div class="page-width">
    <div class="store__grid grid grid--gapless grid--1-col grid--1-col-tablet grid--2-col-desktop location-container">
      <div class="store__media-item store__media-item--medium store__media-item--top grid__item">
        <div class="store__media store__media--adapt global-media-settings background-transparent">
          {%- if section.settings.image != blank -%}
            {{
              section.settings.image
              | image_url: width: 800
              | image_tag:
                loading: 'lazy',
                width: 800,
                height: 500,
                alt: section.settings.name
            }}
          {%- endif -%}
        </div>
      </div>

      <div class="store__text-item grid__item">
        <div class="store__content store__content--top store__content--desktop-left store__content--mobile-left store__content--adapt content-container background-transparent">
          {%- if section.settings.name != blank -%}
            <h3 class="store__heading inline-richtext h3">{{ section.settings.name }}</h3>
          {%- endif -%}

          {%- if section.settings.store_type != blank -%}
            <h4 class="h4" style="margin: 2rem 0">{{ section.settings.store_type }}</h4>
          {%- endif -%}

          {%- if section.settings.address != blank -%}
            <div style="display: flex; gap: 2rem; margin-bottom: 1rem;">
              <p style="min-width: 10rem;">{{ section.settings.address_label }}</p>
              <p>{{ section.settings.address }}</p>
            </div>
          {%- endif -%}

          {%- if section.settings.phone != blank -%}
            <div style="display: flex; gap: 2rem; margin-bottom: 1rem;">
              <p style="min-width: 10rem;">{{ section.settings.phone_label }}</p>
              <p>{{ section.settings.phone }}</p>
            </div>
          {%- endif -%}

          {%- for block in section.blocks -%}
            {%- if block.type == 'day_time-schedule' -%}
              {%- assign day_key = block.settings.day | downcase | append: '_label' -%}
              <div class="day-time-schedule" {{ block.shopify_attributes }}>
                <p class="day-time-schedule__day" style="min-width: 10rem;">{{ section.settings[day_key] }}</p>
                <p class="day-time-schedule__time">{{ block.settings.time }}</p>
              </div>
            {%- endif -%}
          {%- endfor -%}

          {%- if section.settings.map_url != blank -%}
            <div style="display: flex; gap: 2rem; margin-top: 2rem; width: 100%">
              <h4 class="h4" style="margin-top: 0; margin-bottom: 0;">{{ section.settings.directions_label }}</h4>
              <iframe
                src="{{ section.settings.map_url }}"
                width="405"
                height="300"
                style="border:0;"
                allowfullscreen=""
                loading="lazy"
                referrerpolicy="no-referrer-when-downgrade"
                title="Mappa {{ section.settings.name }}"
              ></iframe>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Store Location",
  "tag": "section",
  "class": "store",
  "settings": [
    {
      "type": "header",
      "content": "Store info"
    },
    {
      "type": "inline_richtext",
      "id": "name",
      "label": "Store name",
      "default": "Store name"
    },
    {
      "type": "inline_richtext",
      "id": "store_type",
      "label": "Services",
      "default": "Panificio, pasticceria, caffetteria"
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Store image"
    },
    {
      "type": "text",
      "id": "address",
      "label": "Address",
      "default": "Via Example 1, 43100 Parma PR"
    },
    {
      "type": "text",
      "id": "phone",
      "label": "Phone",
      "default": "+39 0521 000000"
    },
    {
      "type": "text",
      "id": "map_url",
      "label": "Google Maps embed URL",
      "info": "Paste the URL from the Google Maps embed code (the src attribute of the iframe)"
    },
    {
      "type": "header",
      "content": "Labels"
    },
    {
      "type": "text",
      "id": "address_label",
      "label": "Address label",
      "default": "Indirizzo"
    },
    {
      "type": "text",
      "id": "phone_label",
      "label": "Phone label",
      "default": "Telefono"
    },
    {
      "type": "text",
      "id": "directions_label",
      "label": "Directions label",
      "default": "Indicazioni"
    },
    {
      "type": "text",
      "id": "monday_label",
      "label": "Monday label",
      "default": "Lunedì"
    },
    {
      "type": "text",
      "id": "tuesday_label",
      "label": "Tuesday label",
      "default": "Martedì"
    },
    {
      "type": "text",
      "id": "wednesday_label",
      "label": "Wednesday label",
      "default": "Mercoledì"
    },
    {
      "type": "text",
      "id": "thursday_label",
      "label": "Thursday label",
      "default": "Giovedì"
    },
    {
      "type": "text",
      "id": "friday_label",
      "label": "Friday label",
      "default": "Venerdì"
    },
    {
      "type": "text",
      "id": "saturday_label",
      "label": "Saturday label",
      "default": "Sabato"
    },
    {
      "type": "text",
      "id": "sunday_label",
      "label": "Sunday label",
      "default": "Domenica"
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "header",
      "content": "Padding"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding top",
      "default": 12
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Padding bottom",
      "default": 12
    }
  ],
  "blocks": [
    {
      "type": "day_time-schedule",
      "name": "Opening hours",
      "limit": 7,
      "settings": [
        {
          "type": "select",
          "id": "day",
          "label": "Day",
          "options": [
            { "value": "Monday", "label": "Monday" },
            { "value": "Tuesday", "label": "Tuesday" },
            { "value": "Wednesday", "label": "Wednesday" },
            { "value": "Thursday", "label": "Thursday" },
            { "value": "Friday", "label": "Friday" },
            { "value": "Saturday", "label": "Saturday" },
            { "value": "Sunday", "label": "Sunday" }
          ],
          "default": "Monday"
        },
        {
          "type": "text",
          "id": "time",
          "label": "Hours",
          "default": "8:00 - 18:00"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Store Location",
      "blocks": [
        { "type": "day_time-schedule", "settings": { "day": "Monday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Tuesday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Wednesday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Thursday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Friday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Saturday", "time": "8:00 - 18:00" } },
        { "type": "day_time-schedule", "settings": { "day": "Sunday", "time": "Chiuso" } }
      ]
    }
  ],
  "locales": {
    "en": {
      "title": "Store Location"
    },
    "it": {
      "title": "Sede"
    }
  }
}
{% endschema %}
